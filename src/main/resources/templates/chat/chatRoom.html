<!-- templates/chat/chatRoom.html -->
<div th:fragment="content">
	
    <h4 class="mb-4">ğŸ’¬ <span th:text="${targetNickname}">ìƒëŒ€ë°© ë‹‰ë„¤ì„</span> ë‹˜ê³¼ì˜ ì±„íŒ…</h4>

    <!-- ë©”ì‹œì§€ ì¶œë ¥ ì˜ì—­ -->
	<div id="chatArea" class="border p-3 rounded overflow-auto" style="height: 400px; background-color: #f9f9f9;">
	    <div th:each="msg : ${messageList}" class="mb-2">

	        <!-- ë‚´ê°€ ë³´ë‚¸ ë©”ì‹œì§€ -->
	        <div th:if="${msg.senderId == session.loginUser.userId}" class="text-end">
	            <div class="d-inline-block p-2 rounded bg-primary text-white">
	                <span th:text="${msg.content}" style="font-size: 1.05rem;"></span><br/>
	                <small class="text-light">
	                    <span th:text="${#temporals.format(msg.sentAt, 'HH:mm')}">00:00</span>
	                    <span th:text="${msg.read ? 'âœ”âœ”' : 'âœ”'}"></span>
	                </small>
	            </div>
	        </div>

	        <!-- ìƒëŒ€ë°©ì´ ë³´ë‚¸ ë©”ì‹œì§€ -->
	        <div th:if="${msg.senderId != session.loginUser.userId}" class="text-start">
	            <div class="d-inline-block p-2 rounded bg-light border">
	                <span th:text="${msg.content}" style="font-size: 1.05rem;"></span><br/>
	                <small class="text-muted">
	                    <span th:text="${#temporals.format(msg.sentAt, 'HH:mm')}">00:00</span>
	                </small>
	            </div>
	        </div>

	    </div>
	</div>

    <!-- ì…ë ¥ì°½ -->
    <form id="chatForm" class="mt-3 d-flex">
        <input type="text" id="msgInput" class="form-control me-2" placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”">
        <button type="submit" class="btn btn-outline-success">ì „ì†¡</button>
    </form>

	<!-- ì±„íŒ…ë°© ë‚˜ê°€ê¸° ë²„íŠ¼ -->
	<button id="leaveBtn" class="btn btn-outline-danger btn-sm mt-2">ì±„íŒ…ë°© ë‚˜ê°€ê¸°</button>

	<form id="leaveForm" th:action="@{/chat/leave}" method="post" style="display: none;">
	    <input type="hidden" name="roomId" th:value="${roomId}" />
	</form>
	
	<!-- chatRoom.jsìš© ì „ì—­ë³€ìˆ˜ ì„¤ì • -->
	<script th:inline="javascript">
	    window.roomId = /*[[${roomId}]]*/ 0;
	    window.senderId = /*[[${session.loginUser.userId}]]*/ 0;
	</script>

</div>