<div th:fragment="content" class="d-flex flex-column align-items-center w-100 px-3 px-md-0 mx-auto" style="max-width: 768px;">
	
	<!-- ë’¤ë¡œê°€ê¸°, ëª©ë¡, ë‚˜ê°€ê¸° ë²„íŠ¼ div -->
	<div class="btn-group d-flex mt-4 mb-3 w-100">
	    <!-- ë’¤ë¡œê°€ê¸° ë²„íŠ¼ -->
	    <button type="button" class="btn btn-secondary btn-sm" onclick="history.back();">
	        <i class="bi bi-arrow-left"></i> ë’¤ë¡œê°€ê¸°
	    </button>

	    <!-- ì±„íŒ…ë°© ëª©ë¡ ì´ë™ ë²„íŠ¼ -->
	    <a th:href="@{/chat/list}" class="btn btn-primary btn-sm">
	        <i class="bi bi-chat-dots"></i> ì±„íŒ… ëª©ë¡ìœ¼ë¡œ
	    </a>
		<!-- ì±„íŒ…ë°© ë‚˜ê°€ê¸° ë²„íŠ¼ -->
		<button id="leaveBtn" class="btn btn-danger btn-sm">ì±„íŒ…ë°© ë‚˜ê°€ê¸°</button>
		<form id="leaveForm" th:action="@{/chat/leave}" method="post" style="display: none;">
		    <input type="hidden" name="roomId" th:value="${roomId}" />
		</form>
	</div>

    <h4 class="mb-4">ğŸ’¬ <span th:text="${targetNickname}">ìƒëŒ€ë°© ë‹‰ë„¤ì„</span> ë‹˜ê³¼ì˜ ì±„íŒ…</h4>

	<!-- ë©”ì‹œì§€ ì¶œë ¥ ì˜ì—­ -->
	<div id="chatArea" class="border p-3 rounded overflow-auto w-100" style="height: 400px; background-color: #f9f9f9;">
	    <div th:each="msg : ${messageList}" class="mb-3">

	        <!-- ë‚´ê°€ ë³´ë‚¸ ë©”ì‹œì§€ -->
	        <div th:if="${msg.senderId == session.loginUser.userId}" class="text-end">
	            <div class="d-inline-block rounded bg-primary text-white px-3 py-2" style="max-width: 80%;">
	                <span th:text="${msg.content}" style="font-size: 1.05rem;"></span>
	            </div>
	            <div class="text-end text-secondary mt-1" style="font-size: 0.75rem;">
	                <span th:text="${#temporals.format(msg.sentAt, 'HH:mm')}">00:00</span>
	                <span th:text="${msg.read ? 'ì½ìŒ' : 'ì•ˆì½ìŒ'}"></span>
	            </div>
	        </div>

	        <!-- ìƒëŒ€ë°©ì´ ë³´ë‚¸ ë©”ì‹œì§€ -->
	        <div th:if="${msg.senderId != session.loginUser.userId}" class="text-start">
	            <div class="d-inline-block rounded bg-light border px-3 py-2" style="max-width: 80%;">
	                <span th:text="${msg.content}" style="font-size: 1.05rem;"></span>
	            </div>
	            <div class="text-start text-muted mt-1" style="font-size: 0.75rem;">
	                <span th:text="${#temporals.format(msg.sentAt, 'HH:mm')}">00:00</span>
	            </div>
	        </div>

	    </div>
	</div>


    <!-- ì…ë ¥ì°½ -->
    <form id="chatForm" class="mt-3 d-flex w-100">
        <input type="text" id="msgInput" class="form-control me-2" placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”">
        <button type="submit" class="btn btn-outline-success px-4" style="white-space: nowrap;">ì „ì†¡</button>
    </form>

	<!-- chatRoom.jsìš© ì „ì—­ë³€ìˆ˜ ì„¤ì • -->
	<script th:inline="javascript">
		window.roomId = /*[[${roomId}]]*/ null;
		window.senderId = /*[[${session.loginUser.userId}]]*/ 0;
		window.targetId = /*[[${targetId}]]*/ 0;
		//ì´ë¯¸ ì„œë²„ì—ì„œ ë°›ì€ ë©”ì‹œì§€ëŠ” í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë‹¤ì‹œ ë Œë”ë§í•˜ì§€ ì•Šë„ë¡
		// shownMessageIdsë¥¼ ìˆ˜ë™ìœ¼ë¡œ ëª¨ì•„ì„œ ë³´ë‚´ê¸° (map ëŒ€ì‹  each)
		window.shownMessageIds = [
			/*[# th:each="msg : ${messageList}"]*/
				/*[[${msg.msgId}]]*/,
			/*[/]*/
		];
	</script>

</div>