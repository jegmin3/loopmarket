<div th:fragment="content" style="min-height: 100vh; display: flex; flex-direction: column; margin: 0;">
  <!-- ìƒë‹¨ í—¤ë” -->
  <div class="admin-header d-flex justify-content-between align-items-center px-4 py-3 border-bottom shadow-sm"
       style="background-color: #ffffff;">
    <h5 class="mb-0 fw-bold">ê´€ë¦¬ì í˜ì´ì§€</h5>
    <button class="btn btn-outline-dark d-md-none" id="toggleSidebar">&#9776;</button>
  </div>

  <!-- ì „ì²´ ë ˆì´ì•„ì›ƒ -->
  <div class="admin-layout d-flex flex-grow-1" style="min-height: 0;">
    <!-- ì‚¬ì´ë“œë°” ì˜¤ë²„ë ˆì´ -->
    <div id="sidebarOverlay" class="overlay d-none"></div>

    <!-- ì‚¬ì´ë“œë°” -->
    <div class="sidebar" id="adminSidebar">
      <div class="sidebar-header px-4 pt-4 pb-2 border-bottom">
        <h6 class="fw-bold text-secondary">ê´€ë¦¬ì ë©”ë‰´</h6>
      </div>
      <div class="nav flex-column px-3 pt-3">
        <button class="nav-link admin-link" data-url="/admin/dashboard">ğŸ“Š ëŒ€ì‹œë³´ë“œ</button>
        <button class="nav-link admin-link" data-url="/admin/user">ğŸ‘¥ ì‚¬ìš©ì ê´€ë¦¬</button>
        <button class="nav-link admin-link" data-url="/admin/products">ğŸ“¦ ìƒí’ˆ ê´€ë¦¬</button>
        <button class="nav-link admin-link" data-url="/admin/reports">ğŸš¨ ì‹ ê³  ê´€ë¦¬</button>
        <button class="nav-link admin-link" data-url="/admin/categories">ğŸ“‚ ì¹´í…Œê³ ë¦¬ ê´€ë¦¬</button>
        <button class="nav-link admin-link" data-url="/admin/notice">ğŸ“¢ ê³µì§€ì‚¬í•­</button>
        <button class="nav-link admin-link" data-url="/admin/notifications">ğŸ”” ì•Œë¦¼ ì „ì†¡</button>
      </div>
    </div>

    <!-- ì½˜í…ì¸  ì˜ì—­ -->
    <main id="admin-content" class="p-4 bg-light flex-grow-1 rounded-start-4" style="overflow-y: auto;">
      <!-- AJAX ì½˜í…ì¸ ê°€ ì—¬ê¸°ì— ë¡œë“œë¨ -->
    </main>
  </div>

  <!-- ìŠ¤íƒ€ì¼ -->
  <style>
    html, body {
      height: 100%;
      margin: 0;
    }

    .admin-layout {
      flex-grow: 1;
      min-height: 0;
      display: flex;
    }

    .sidebar {
      width: 220px;
      background-color: #fdfdfd;
      border-right: 1px solid #e0e0e0;
      height: auto;
      transition: transform 0.3s ease;
      z-index: 1000;
    }

    .nav-link {
      background: transparent;
      border: none;
      text-align: left;
      padding: 0.75rem 1rem;
      font-weight: 500;
      color: #495057;
      transition: background 0.2s, color 0.2s;
      border-radius: 0.5rem;
      cursor: pointer;
    }

    .nav-link:hover {
      background-color: #f0f2f5;
    }

    .nav-link.active {
      background-color: #0d6efd;
      color: white;
    }

    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background-color: rgba(0, 0, 0, 0.4);
      z-index: 999;
    }

    @media (max-width: 768px) {
      .sidebar {
        position: fixed;
        top: 0;
        left: 0;
        transform: translateX(-100%);
        height: 100vh;
        box-shadow: 2px 0 10px rgba(0, 0, 0, 0.15);
      }

      .sidebar.show {
        transform: translateX(0);
      }
    }

    @media (min-width: 769px) {
      .overlay {
        display: none !important;
      }

      #toggleSidebar {
        display: none;
      }

      .sidebar {
        transform: none !important;
        position: relative;
      }
    }

    #admin-content {
      background-color: #f8f9fa;
      border-left: none;
    }
  </style>

  <!-- ìŠ¤í¬ë¦½íŠ¸ -->
  <script th:inline="javascript">
    $(document).ready(function () {
      $('#toggleSidebar').on('click', function () {
        $('#adminSidebar').toggleClass('show');
        $('#sidebarOverlay').toggleClass('d-none');
      });

      $('#sidebarOverlay').on('click', function () {
        $('#adminSidebar').removeClass('show');
        $(this).addClass('d-none');
      });

      function loadAdminPage(url) {
        $.ajax({
          url: url,
          method: 'GET',
		  success: function (data) {
		    $('#admin-content').html(data);
		    if (url.startsWith('/admin/user')) {
		      $.getScript('/js/admin_user.js');
		    }
		    setTimeout(() => {
		      if (url === '/admin/dashboard') {
		        $.getScript('/js/admin_dashboard.js');
		      } else if (url === '/admin/products') {
		        $.getScript('/js/admin_products.js');
		      } else if (url === '/admin/categories') {
		        $.getScript('/js/admin_category.js');
		      }
		    }, 100);
		  },
          error: function () {
            $('#admin-content').html('<p class="text-danger">í˜ì´ì§€ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.</p>');
          }
        });
      }

      // ê¸°ë³¸ í˜ì´ì§€ ë¡œë“œ
      loadAdminPage('/admin/user');

      // ë©”ë‰´ í´ë¦­ ì‹œ
      $(document).on('click', '.admin-link', function (e) {
        e.preventDefault();
        const url = $(this).data('url');
        $('.admin-link').removeClass('active');
        $(this).addClass('active');
        loadAdminPage(url);
      });
    });
  </script>
</div>